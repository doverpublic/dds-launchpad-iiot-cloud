<ol class="CV-breadcrumb">
        <li class="CV-breadcrumb-item">
            <a [routerLink]="['../view']">
                View Company Details
              </a>
        </li>
        <li class="CV-breadcrumb-item">
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                width="14px"  viewBox="0 0 444.819 444.819" style="enable-background:new 0 0 444.819 444.819;"
                xml:space="preserve">
           <g>
               <path d="M352.025,196.712L165.884,10.848C159.029,3.615,150.469,0,140.187,0c-10.282,0-18.842,3.619-25.697,10.848L92.792,32.264
                   c-7.044,7.043-10.566,15.604-10.566,25.692c0,9.897,3.521,18.56,10.566,25.981l138.753,138.473L92.786,361.168
                   c-7.042,7.043-10.564,15.604-10.564,25.693c0,9.896,3.521,18.562,10.564,25.98l21.7,21.413
                   c7.043,7.043,15.612,10.564,25.697,10.564c10.089,0,18.656-3.521,25.697-10.564l186.145-185.864
                   c7.046-7.423,10.571-16.084,10.571-25.981C362.597,212.321,359.071,203.755,352.025,196.712z"/>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           </svg>
        </li>
        <li class="CV-eadcrumb-item">
        
           
                  
                <a class="active">
                        Add Company
                    </a>
</li>
      </ol>
<form [formGroup]="user" class="editorForm">



    <accordion class="civaconAccordion" [closeOthers]="oneAtATime">

        <accordion-group [isDisabled]="true" [panelClass]="customClass" *ngFor="let group of groups;let i = index;" [isOpen]="group.isFirstOpen">

            <div accordion-heading class="clearfix">
                <a class="Accordionheader" (click)="open(group,i)" [ngClass]="group.isFirstOpen?'activeheader':'inactiveHeader'"> {{group.title}}
                    <i id="icon" [ngClass]="group.isFirstOpen? 'fa fa-chevron-right open':'fa fa-chevron-right' "></i>
                    <i class="fa fa-pencil pencil" [ngClass]="group.isFirstOpen? 'pencilHide':'pencilpen'" aria-hidden="true"></i>
                </a>
            </div>


            <div [ngSwitch]="group?.content">
                <div *ngSwitchCase="'Trailer'" class="row col-sm-12 ">
                    <div class="col-sm-5 row">
                        <div class="form-group col-sm-6 inputstyle">
                            <input id="textTrailerName" type="text" formControlName="name" placeholder="Company Name" required/>
                            <label class="inputlabel" for="textTrailerName">Company Name               
                                <span class="star" >*</span>
                            </label>

                            <div class="error" *ngIf="user.get('name').touched && user.get('name').hasError('required')">
                                Name is required
                            </div>
                            <div class="error" *ngIf="user.get('name').touched && user.get('name').hasError('minlength')">
                                Minimum of 2 characters
                            </div>
                            
                          
                        </div>

                        <div class="form-group col-sm-6 inputstyle">
                            <input id="textCode" formControlName="code" placeholder="code" required/>
                            <label class="inputlabel" for="textCode">Code
                                    <span class="star" >*</span>

                            </label>

                            <div class="error" *ngIf="user.get('code').touched && user.get('code').hasError('required')">
                                Code is required
                            </div>
                            <div class="error" *ngIf="user.get('code').touched && user.get('code').hasError('minlength')">
                                Minimum of 2 characters
                            </div>
                        </div>

                        <div class="form-group col-sm-12 inputstyle">
                            <textarea style="height:150px" id="textdescription" formControlName="description" placeholder=" Company Description"></textarea>
                            <label class="inputlabel" for="textdescription" [ngClass]="{ 'lableFocused' : user.controls['description'].value.length != 0 }"> Company Description</label>

                        </div>



                    </div>
                    <div class="form-group col-sm-4 trailerlogoupload ">
                            <ng-template #popTemplate>
                                    File size: 25kb jpg,png <br>
                                    Dimensions:250 * 70
                               </ng-template>
                                <label [ngClass]="{ 'lableFocused' :url.length != 0 }">Upload Photo</label>
                                <svg  (click)="pop.toggle()" height="25" id="svg8" version="1.1" viewBox="0 0 12.7 12.7" width="25" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs2"/><g id="layer1" transform="translate(0,-284.29998)"><circle cx="6.3500376" cy="290.64993" id="path4504" r="3.8805983" style="opacity:1;vector-effect:none;fill:none;fill-opacity:0.58506224;stroke:#003664;stroke-width:0.70555556;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"/><path d="m 5.2916669,289.94443 c 0,-0.70557 0.3527779,-1.05835 1.0583334,-1.05835 0.7055555,0 1.0583337,0.35278 1.0583334,1.05835 3e-7,0.70555 -1.0583334,0 -1.0583334,1.41109" id="path4506" style="fill:none;fill-rule:evenodd;stroke:#003664;stroke-width:0.70555556px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"/><rect height="0.70555556" id="rect4508" style="opacity:1;vector-effect:none;fill:#003664;fill-opacity:1;stroke:none;stroke-width:0.70555556;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" width="0.70555556" x="5.9972234" y="292.06107"/></g></svg>
                                <span [popover]="popTemplate" 
                                triggers="" #pop="bs-popover" 
                                placement="top" [outsideClick]="true">
                          </span>
                                <div class="btn-file">
                                    Browse & Upload
                                    <input type="file" accept="image/*"  (change)="onSelectFile($event)">
                                </div>
                   
                            <div *ngIf="error.isError" class="alert alert-danger">
                                    {{ error.errorMessage }}
                                 </div>
                                           
                </div>
                    <div class="col-sm-2 FilePlaceHolder">
               
                        <img *ngIf="url" [src]="url" >
                        <section   *ngFor="let image of this.imagefile">
                                <p>{{image.name}}</p>  
                                <p> {{image.filesize}}</p>
          
                          </section>
          

                    </div>
                </div>
                <div *ngSwitchCase="'Address'" class="row col-sm-12 ">
                    <div class="row col-sm-12">
                       
                        <div class=" col-sm-12">
                            <div class="row">
                                <div class="col-sm-12 form-group inputstyle">
                                    <input id="textaddress" formControlName="address" placeholder="address" required>
                                    <label class="inputlabel" for="textaddress">Address
                                            <span class="star">*</span>

                                    </label>
                                    <div class="error" *ngIf="user.get('address').touched && user.get('address').hasError('required')">
                                            Address is required
                                        </div>
                                        <div class="error" *ngIf="user.get('address').touched && user.get('address').hasError('minlength')">
                                            Minimum of 2 characters
                                        </div>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-sm-4 form-group inputstyle">

                                    <select class="editorinput dropdownaddress" (change)="onCountrySelect(user.controls['country'].value)" formControlName="country" required>
                                   <option [ngValue]="null" disabled selected> Country   <span class="star" >*</span></option>
                             
                                   
                                        <option *ngFor=" let n of countries;let i=index" [ngValue]="n">{{n.name}}</option>
                                    </select>
                                    <label [ngClass]="{ 'lableFocused' : user.controls['state'].value.length != 0 }">Country <span class="star" >*</span></label>

                                    <div class="error" *ngIf="user.get('country').touched && user.get('country').hasError('required')">
                                                Country is required
                                            </div>
                                </div>
                                <div class="col-sm-4 form-group inputstyle">
                                    <select class="editorinput dropdownaddress" (change)="onSateSelect(user.controls['state'].value)" formControlName="state" required>
                                            <option [ngValue]="null" disabled selected> State / Province
                                                <span class="star" >*</span>

                                        </option>

                                        <option [disabled]="statesList.length == 0" [ngValue]="s" *ngFor=" let s of statesList">{{s.name}}</option>
                                    </select>
                                    <label [ngClass]="{ 'lableFocused' : user.controls['state'].value.length != 0 }">State <span class="star" >*</span></label>

                                    <div class="error" *ngIf="user.get('state').touched && user.get('state').hasError('required')">
                                            State is required
                                        </div>
                                </div>
                                <div class=" col-sm-4 form-group inputstyle">
                                    <select class="editorinput dropdownaddress" (change)="onCitySelect(user.controls['city'].value)" formControlName="city" required>
                                            <option [ngValue]="null" disabled selected> City 
                                                <span class="star" >*</span>

                                        </option>

                                        <option [disabled]="citiesList.length == 0" [ngValue]="c" *ngFor=" let c of citiesList">{{c.name}}</option>
                                    </select>
                                    <label [ngClass]="{ 'lableFocused' : user.controls['city'].value.length != 0 }">City <span class="star" >*</span></label>

                                    <div class="error" *ngIf="user.get('city').touched && user.get('city').hasError('required')">
                                            City is required
                                        </div>
                                </div>
                             
                            </div>
                            <div class="row">
                                    <div class="col-sm-4 form-group inputstyle">
                                            <input id="textZipcode" formControlName="zipcode" placeholder="Postal Code" required>
                                            <label class="inputlabel" for="textZipcode">Postal Code
                                                    <span class="star">*</span>
        
                                            </label>
                                            <div class="error" *ngIf="user.get('zipcode').touched && user.get('zipcode').hasError('pattern')">
                                                    Postal Code is not valid
                                                </div>
                                                
                
                                        </div>
                            


                            </div>
                            <div class="row">
                                <div class=" col-sm-6 form-group inputstyle">
                                    <input id="textsearch" formControlName="search" placeholder="search for location" type="text">
                                    <label class="inputlabel" for="textsearch">Search in map</label>
                                                </div>
                                <div class=" col-sm-2 form-group">
                                    <button class="cvSearchButton" type="search" style="width:100%">
                                        <i class="fa fa-search"></i>&nbsp;Search</button>

                                </div>
                                <div class=" col-sm-9 form-group">
                                  
                                    <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom" [disableDefaultUI]="false" [zoomControl]="false" (mapClick)="mapClicked($event)">
                                        <agm-marker (markerClick)="clickedMarker(m.label, i)" [latitude]="lat" [longitude]="lng" [markerDraggable]=true (dragEnd)="markerDragEnd(m, $event)"></agm-marker>
                                    </agm-map>
                                    <div class="row">
                                            <div class=" col-sm-4 form-group inputstyle">
                                                    <input id="textlatitude" formControlName="latitude" placeholder="latitude" readonly="readonly" >
                                                    <label class="inputlabel" for="textlatitude">Latitude</label>
                                                
                                                </div>
                                                <div class=" col-sm-4 form-group inputstyle">
                                                    <input id="textlongitude" formControlName="longitude" placeholder="longitude" readonly="readonly" >
                                                    <label class="inputlabel" for="textlongitude">Longitude</label>
                                           
                                                </div> </div>
                                   
                                </div>
                            </div>
                        </div>

                    </div>


                </div>
                <div *ngSwitchCase="'Contact'" class="row col-sm-12 ">

                    <div class="col-sm-12" formArrayName="itemRows">
                            <div class="row col-sm-12">
                                    <p> Point of Contact </p>
                                </div>
                        <div class="row" *ngFor="let contactdeail of user.controls.itemRows.controls; let i=index">
                            <div class="row col-sm-12" [formGroupName]="i">
                                

                                <div class="col-sm-3  inputstyle form-group">

                                    <input id="textFirstName{{i}}" type="text" formControlName="firstname" placeholder="First name">
                                    <label class="inputlabel" for="textFirstName{{i}}">First Name</label>

                                </div>
                                <div class="col-sm-3  inputstyle form-group">
                                    <input id="textLastName{{i}}" type="text" formControlName="lastname" placeholder="Last name">
                                    <label class="inputlabel" for="textLastName{{i}}">Last Name</label>

                                </div>

                                <div class="col-sm-2  inputstyle form-group">
                                    <input id="textemail{{i}}" type="text" formControlName="email" placeholder="Email">
                                    <label class="inputlabel" for="textemail{{i}}">Email</label>

                                    <div class="error" *ngIf="user.controls.itemRows.controls[i].controls.email.touched && user.controls.itemRows.controls[i].controls.email.hasError('pattern')">
                                              Email is not valid   
                                       </div> 
                                </div>

                                <div class="col-sm-2  inputstyle form-group">
                                    <input id="textphone{{i}}" type="text" formControlName="phone" placeholder="Phone number">
                                    <label class="inputlabel" for="textphone{{i}}">Phone Number</label>
                                    <div class="error" *ngIf="user.controls.itemRows.controls[i].controls.phone.touched && user.controls.itemRows.controls[i].controls.phone.hasError('pattern')">
                                            Ph Number is not valid   
                                     </div> 
                                </div>

                                <div class="col-sm-1 " *ngIf="user.controls['itemRows'].controls.length > 1 && i!=user.controls['itemRows'].controls.length-1" (click)="deleteRow(i)">
                                        <i class="fa fa-minus plusButton iconAsButton" aria-hidden="true" (click)="remove(i,template)">

                                        </i>
                                </div>
                                <div class="col-sm-1 ">
                                 <i class="fa fa-plus plusButton iconAsButton" *ngIf="i==user.controls['itemRows'].controls.length-1" (click)="addNewRow()"></i>
                                       
                                </div>
                            </div>

                        </div>

                    </div>
                <!--     <div class="col-sm-1">
                        <button  class="pull-right plusButton" (click)="addNewRow()">
                            <i class="fa fa-plus"></i>
                        </button>
                      
                    </div> -->

                </div>
                <!--       <div *ngSwitchCase="'Preferences'">
                    <div class="row col-sm-12">

                        <div class="col-sm-4">
                            <p>Trailer Company :
                                <span>
                                    <b>{{WlName}}</b>
                                </span>
                            </p>
                            <p> Location
                                <span>
                                    <b>{{wlCountry}}</b>
                                </span>
                            </p>

                            <p> Name
                                <span>
                                    <b> {{WlFirstName}}</b>
                                </span>
                            </p>

                        </div>
                        <div class="col-sm-8">

                            <div class="row">

                                <div class="col-sm-2 form-group inputstyle">
                                    <input id="textShiftName" formControlName="shiftname" [(ngModel)]="Wlshiftname" type="text" placeholder="Shift name">
                                    <label class="inputlabel" for="textShiftName">Shift name</label>
                                    <span *ngIf="Wlshiftname" (click)="clearText()">
                                        <i class="fa fa-times times" aria-hidden="true"></i>

                                    </span>
                                </div>
                                <div class="col-sm-2 form-group inputstyle">
                                    <input id="textShiftStartTime" [outsideClick]="true" [popover]="startTimeTemplate" [value]="startTime | date:'h:mm a'" formControlName="shiftStartTime"
                                        type="text" placeholder="Shift start time">

                                    <label class="inputlabel" for="textShiftStartTime">Shift start time</label>

                                </div>

                                <div class="col-sm-2 form-group inputstyle">
                                    <input id="textShiftEndTime" [outsideClick]="true" [popover]="endTimeTemplate" [value]="endTime | date:'h:mm a'" formControlName="shiftEndTime"
                                        type="text" placeholder="Shift end time">

                                    <label class="inputlabel" for="textShiftEndTime">Shift end time</label>

                                </div>

                                <div class="col-sm-1 form-group">
                                    <button class="plusButton">
                                        <i class="fa fa-plus " aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
 -->
            </div>

            <button class="AccordionSubmit" (click)="next(group,i)" *ngIf="i < groups.length-1">Next
                <i class="fa fa-play" aria-hidden="true"></i>
            </button>

        </accordion-group>

    </accordion>
 
    <div clas="row">
        <button class="AccordionSubmit" type="submit" [ngClass]="{'diabled-class': user.invalid}" [disabled]="user.invalid" (click)="Submit(user)"> Save</button>
        <button class=" AccordionCancel" (click)="cancelEdit()">Cancel</button>
    </div>

</form>

<ng-template #startTimeTemplate>
    <timepicker [(ngModel)]="startTime">
    </timepicker>
</ng-template>
<ng-template #endTimeTemplate>
    <timepicker [(ngModel)]="endTime">
    </timepicker>
</ng-template>